<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="icon" href="cima.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Curso</title>
    <link rel="stylesheet" href="cadastro.css">
</head>
<header>
  <div class="header-container">
    <img src="logo.png" alt="Logo Equipe Alfa" class="logo">

    <!-- Botão Hamburger -->
    <div class="hamburger" id="hamburger">
      <div></div>
      <div></div>
      <div></div>
    </div>

    <nav class="navbar" id="navMenu">
      <a href="http://gameralfa.com/">Início</a>
      <!--<a href="login.html">Login</a>-->
      <a href="#horarios">Depoimentos</a>
      <a href="https://sites.google.com/view/equipealfa/in%C3%ADcio">Loja Online</a>
    </nav>
  </div>
</header>
<body>
    <div class="main-content-wrapper">
        <div class="container">
            <main>
                <h1>Inscreva-se já para participar do nosso curso</h1>
                <form id="formCadastro" method="POST">
                    <label for="nome"><b>Nome completo:</b></label>
                    <input id="nome" name="nome" type="text" autocomplete="name" required placeholder="Ex: João da Silva" style="margin-bottom: 10px;">
                    
                    <label for="numero_aluno"><b>WhatsApp:</b></label>
                    <input id="numero_aluno" name="numero_aluno" type="tel" inputmode="tel" placeholder="(99) 9 9999-9999" required style="margin-bottom: 10px;">
                    
                    <label for="senhaUsuario"><b>Crie sua Senha:</b></label>
                    <input id="senhaUsuario" name="senhaUsuario" type="password" placeholder="Exemplo: 1234abc" required style="margin-bottom: 10px;">

                    <button id="btnEnviar" type="submit"><b>Enviar</b></button>
                    <br>
                    <h6>Ao clicar em "Enviar", nós garantimos que os seus dados pessoais não serão usados para nenhuma finalidade que não seja diretamente ligada ao curso.</h6>
                </form>
            </main>
        </div>
    </div>

    <script>
      // HAMBURGER MENU
      const hamburger = document.getElementById('hamburger');
      const navMenu = document.getElementById('navMenu');
      hamburger.addEventListener('click', () => {
          hamburger.classList.toggle('active');
          navMenu.classList.toggle('active');
      });

      // MÁSCARA DE WHATSAPP
      const whatsappInput = document.getElementById("numero_aluno");
      if (whatsappInput) {
          whatsappInput.addEventListener("input", function (e) {
              let valor = this.value.replace(/\D/g, "");
              if (valor.length > 11) valor = valor.slice(0, 11);

              let formatado = "";
              if (valor.length > 0) formatado = "(" + valor.substring(0, 2);
              if (valor.length >= 3) formatado += ") " + valor.substring(2, 7);
              if (valor.length >= 8) formatado += "-" + valor.substring(7);

              const backspace = e.inputType === "deleteContentBackward";
              if (backspace && this.value.endsWith("-")) {
                  this.value = this.value.slice(0, -1);
                  return;
              }
              this.value = formatado;
          });
      }

      // ENVIO DO FORMULÁRIO PARA O BACKEND
      const form = document.getElementById('formCadastro');
      if (form) {
          form.addEventListener('submit', async (e) => {
              e.preventDefault();

              const nome = document.getElementById('nome').value;
              const numero_aluno = document.getElementById('numero_aluno').value.replace(/\D/g, '');
              const senha = document.getElementById('senhaUsuario').value;

              try {
                  const res = await fetch('https://alfa-gamer.onrender.com/cadastro', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ nome, numero_aluno, senha })
});

                  const data = await res.json();

                  if (data.success) {
                      alert('Cadastro realizado com sucesso!');
                      form.reset();
                  } else {
                      alert('Erro: ' + data.error);
                  }
              } catch (err) {
                  alert('Erro ao conectar com o servidor: ' + err.message);
              }
          });
      }
    </script>
</body>
</html>


