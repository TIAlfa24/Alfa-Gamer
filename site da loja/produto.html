<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <link rel="icon" href="cima.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto - Loja</title>
    <link rel="stylesheet" href="loja.css">
    <link rel="stylesheet" href="produto.css">
    <script src="global.js"></script>
    <script src="avaliações.js"></script>
</head>

<body>
    <div class="draggable-cart-widget" id="draggableCartWidget">
        <div class="draggable-cart-header">
            <span class="draggable-cart-badge" id="draggableCartBadge">0</span>
            <img src="cart.png" alt="Carrinho" height="35px"></img>
        </div>
        <div class="draggable-cart-tooltip">Pressione para mover</div>
    </div>
    <header>
        <div class="header-container">
            <img src="logo.png" alt="Logo Equipe Alfa" class="logo">
            <button class="cart-btn2" id="openCartHeader" title="Abrir carrinho">
                <img class="cart-icon" src="cart.png" alt="Carrinho" height="35px" style="padding-left: 10px;">
                <span class="cart-count" id="cartCountHeader">0</span>
            </button>
            <div class="hamburger" id="hamburger">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <nav class="navbar" id="navMenu">
                <a href="loja.html">Início</a>
                <a href="#">Monte seu PC</a>
                <a href="#">Departamentos</a>
                <button class="cart-btn1" id="openCartNav" title="Abrir carrinho">
                    <img class="cart-icon" src="cart.png" alt="Carrinho" height="35px">
                    <span class="cart-count" id="cartCountNav">0</span>
                </button>
            </nav>
        </div>
    </header>

    <div class="cart-drawer" id="cartDrawer" aria-hidden="true">
        <h3>Carrinho</h3>
        <div class="cart-box">
            <div id="cartItemsDesktop"></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
            <strong>Total:</strong><strong id="cartTotalDesktop">R$ 0,00</strong>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn" id="checkout">Finalizar</button>
            <button class="btn ghost" id="closeCart">Fechar</button>
        </div>
    </div>

    <div class="cart-bottom-sheet" id="cartBottomSheet" aria-hidden="true">
        <div class="cart-bottom-header">
            <h3>Carrinho</h3>
            <button id="closeCartBottom" class="btn ghost">Fechar</button>
        </div>
        <div class="cart-box" id="cartItemsMobile"></div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
            <strong>Total:</strong>
            <strong id="cartTotalMobile">R$ 0,00</strong>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn" id="checkoutMobile">Finalizar</button>
        </div>
    </div>

    <main class="product-container">
        <nav class="breadcrumb">
            <a href="loja.html">Início</a> &gt;
            <a href="#" id="categoryLink">Categoria</a> &gt;
            <a href="#" id="subcategoryLink">Subcategoria</a> &gt;
            <span id="productTitle">Nome do Produto</span>
        </nav>

        <div class="product-grid">
            <div class="product-imagens">
                <div class="imagem-principal">
                    <img src="https://via.placeholder.com/500x500" alt="Produto" id="mainImage">
                </div>
                <div class="miniaturas">
                    <img src="${(p.images && p.images.length) ? p.images[0] : DEFAULT_PRODUCT_IMAGE}" alt="Miniatura 1"
                        onclick="trocarImagem(this.src)">
                    <img src="${(p.images && p.images.length) ? p.images[0] : DEFAULT_PRODUCT_IMAGE}" alt="Miniatura 2"
                        onclick="trocarImagem(this.src)">
                    <img src="${(p.images && p.images.length) ? p.images[0] : DEFAULT_PRODUCT_IMAGE}" alt="Miniatura 3"
                        onclick="trocarImagem(this.src)">
                </div>
            </div>

            <div class="product-info">
                <h1 id="productName">Nome do Produto</h1>
                <div class="preco-container">
                    <div class="preco-antigo-mobile">De: <span id="productOldPriceMobile">R$ 0,00</span></div>
                    <div class="preco-antigo">De: <span id="productOldPrice">R$ 0,00</span></div>
                    <div class="preco-desconto">
                        <span class="preco-valor" id="productPrice">R$ 0,00</span>
                        <span class="desconto-pix">15% OFF no PIX</span>
                    </div>
                    <div class="parcelas">
                        <span id="productInstallments">em até 12x de R$ 0,00 sem juros</span>
                    </div>
                    <div class="estoque-status">
                        <span id="stockStatus" class="em-estoque">Em Estoque</span>
                    </div>
                </div>
                <div class="acoes">
                    <div class="frete-simulador">
                        <input type="text" placeholder="Calcular Frete e Prazo" id="freteInput">
                        <button class="btn-frete">OK</button>
                    </div>
                    <div class="quantidade">
                        <button onclick="adjustQty(-1)">-</button>
                        <input type="number" id="qty" value="1" min="1" max="99">
                        <button onclick="adjustQty(1)">+</button>
                    </div>
                    <button class="btn-comprar principal" onclick="addToCartAndNavigate()">Adicionar ao
                        Carrinho</button>
                    <button class="btn-comprar secundario">Comprar Agora</button>
                </div>
            </div>

            <div class="product-detalhes">
                <div class="tabs">
                    <button class="tab-btn active">Descrição</button>
                    <button class="tab-btn">Especificações</button>
                    <div class="underline"></div>
                </div>

                <div id="descricao" class="tab-content active">
                    <p id="productDescription">Descrição detalhada do produto...</p>
                </div>

                <div id="especificacoes" class="tab-content">
                    <table id="specsTable"></table>
                </div>
            </div>
        </div>
        <div class="divider"></div>
        <div class="comment-grid">
            <div class="rating-container">
                <div class="big-score" id="avgScore">0.0</div>
                <div>
                    <div class="stars" id="avgStars"></div>
                    <div class="meta"><span id="countReviews">0</span> avaliações</div>
                    <div style="color:var(--muted);font-size:13px;padding-bottom: 30px;">
                        Distribuição:
                        <span id="distText">—</span>
                    </div>
                </div>
            </div>
            <div class="comments-list">
                <div class="reviews" id="reviewsList" aria-live="polite"></div>
                <button class="commentBtn" id="writeReviewBtn">Escrever uma avaliação</button>
            </div>
        </div>
    </main>

    <footer>© Equipe Alfa Informática — Todos os direitos reservados</footer>

    <script src="produto.js"></script>
</body>

</html>